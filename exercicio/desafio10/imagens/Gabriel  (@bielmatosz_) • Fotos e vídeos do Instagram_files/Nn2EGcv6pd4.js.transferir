;/*FB_PKG_DELIM*/

__d("LSGetFirstAvailableAdminMessageCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(27).fetchDesc([[[]],"ctaId"]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSApplyAdminMessageCTA",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetFirstAvailableAdminMessageCTAID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetFirstAvailableAdminMessageCTAID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(27).put({threadKey:a[0],messageId:a[2],ctaId:d[0],timestampMs:a[1],adClientToken:a[5],adPreferenceUrl:a[6],adHelpUrl:a[7],showAdChoiceIcon:a[8],title:a[3],actionUrl:a[9],adminMessageNicknameParticipantId:a[10],targetId:a[11],targetTitle:a[12]})},function(e){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return a[2]===b.messageId&&c.i64.eq(a[0],b.threadKey)}).next().then(function(a,e){var f=a.done;a=a.value;return f?d[1]=void 0:(e=a.item,c.sequence([function(a){return d[7]=e.metadataDataclass,d[7]!==void 0?c.sequence([function(a){return c.nativeOperation(b("LSDeserializeFromJsonIntoDictionaryV2.nop"),d[7]).then(function(a){return a=a,d[8]=a[0],a})},function(a){return d[9]=new c.Map(),d[46]="sticker",d[10]=d[8].get(d[46]),d[8],d[10]?d[11]=!1:d[11]=!0,d[11]?0:(d[10]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[69]="sticker_pack_id",d[67]=d[10].get(d[69]),d[10],d[67]!==void 0?d[66].set(d[69],d[67]):0,d[70]="sticker_id",d[68]=d[10].get(d[70]),d[10],d[68]!==void 0?d[66].set(d[70],d[68]):0,d[65]=d[66]),d[9].set(d[46],d[65])),d[47]="word_effects",d[12]=d[8].get(d[47]),d[8],d[12]?d[13]=!1:d[13]=!0,d[13]?c.resolve():c.sequence([function(a){return d[12]?d[64]=!1:d[64]=!0,d[64]?c.resolve(d[65]=void 0):c.sequence([function(a){return d[66]=new c.Map(),d[73]="magic_word_offsets",d[67]=d[12].get(d[73]),d[12],d[67]?d[68]=!1:d[68]=!0,d[68]?c.resolve():c.sequence([function(a){return d[76]=c.createArray(),d[77]=c.i64.of_int32(d[67].length),c.i64.gt(d[77],c.i64.cast([0,0]))?c.loopAsync(d[77],function(a){return d[78]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[67],d[78]).then(function(a){return a=a,d[79]=a[0],d[80]=a[1],a})},function(a){return d[81]=(d[76].push(d[79]),d[76])}])}):c.resolve()},function(a){return d[66].set(d[73],d[76])}])},function(a){return d[74]="magic_word_lengths",d[69]=d[12].get(d[74]),d[12],d[69]?d[70]=!1:d[70]=!0,d[70]?c.resolve():c.sequence([function(a){return d[76]=c.createArray(),d[77]=c.i64.of_int32(d[69].length),c.i64.gt(d[77],c.i64.cast([0,0]))?c.loopAsync(d[77],function(a){return d[78]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[69],d[78]).then(function(a){return a=a,d[79]=a[0],d[80]=a[1],a})},function(a){return d[81]=(d[76].push(d[79]),d[76])}])}):c.resolve()},function(a){return d[66].set(d[74],d[76])}])},function(a){return d[75]="magic_word_emojis",d[71]=d[12].get(d[75]),d[12],d[71]?d[72]=!1:d[72]=!0,d[72]?c.resolve():c.sequence([function(a){return d[71]?d[76]=!1:d[76]=!0,d[76]?c.resolve(d[77]=void 0):c.sequence([function(a){return d[78]=c.createArray(),d[79]=c.i64.of_int32(d[71].length),c.i64.gt(d[79],c.i64.cast([0,0]))?c.loopAsync(d[79],function(a){return d[80]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[71],d[80]).then(function(a){return a=a,d[81]=a[0],d[82]=a[1],a})},function(a){return d[83]=(d[78].push(d[81]),d[78])}])}):c.resolve()},function(a){return d[77]=d[78]}])},function(a){return d[66].set(d[75],d[77])}])},function(a){return d[65]=d[66]}])},function(a){return d[9].set(d[47],d[65])}])},function(a){return d[48]="ig_avatar_sticker",d[14]=d[8].get(d[48]),d[8],d[14]?d[15]=!1:d[15]=!0,d[15]?0:(d[14]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[68]="is_avatar_sticker",d[67]=d[14].get(d[68]),d[14],d[67]!==void 0?d[66].set(d[68],d[67]):0,d[65]=d[66]),d[9].set(d[48],d[65])),d[49]="power_up",d[16]=d[8].get(d[49]),d[8],d[16]?d[17]=!1:d[17]=!0,d[17]?0:(d[16]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[68]="power_up_style",d[67]=d[16].get(d[68]),d[16],d[67]!==void 0?d[66].set(d[68],d[67]):0,d[65]=d[66]),d[9].set(d[49],d[65])),d[50]="ai_bot",d[18]=d[8].get(d[50]),d[8],d[18]?d[19]=!1:d[19]=!0,d[19]?0:(d[18]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[79]="response_id",d[67]=d[18].get(d[79]),d[18],d[67]!==void 0?d[66].set(d[79],d[67]):0,d[80]="bot_action",d[68]=d[18].get(d[80]),d[18],d[68]!==void 0?d[66].set(d[80],d[68]):0,d[81]="sentiment",d[69]=d[18].get(d[81]),d[18],d[69]!==void 0?d[66].set(d[81],d[69]):0,d[82]="sentiment_intensity",d[70]=d[18].get(d[82]),d[18],d[70]!==void 0?d[66].set(d[82],d[70]):0,d[83]="bot_action_int",d[71]=d[18].get(d[83]),d[18],c.i64.neq(d[71],void 0)?d[66].set(d[83],d[71]):0,d[84]="sentiment_int",d[72]=d[18].get(d[84]),d[18],c.i64.neq(d[72],void 0)?d[66].set(d[84],d[72]):0,d[85]="sentiment_intensity_int",d[73]=d[18].get(d[85]),d[18],c.i64.neq(d[73],void 0)?d[66].set(d[85],d[73]):0,d[86]="bot_invocation_message_id",d[74]=d[18].get(d[86]),d[18],d[74]!==void 0?d[66].set(d[86],d[74]):0,d[87]="bot_response_id",d[75]=d[18].get(d[87]),d[18],d[75]!==void 0?d[66].set(d[87],d[75]):0,d[88]="bot_invocation_message_otid",d[76]=d[18].get(d[88]),d[18],d[76]!==void 0?d[66].set(d[88],d[76]):0,d[89]="bot_invocation_logging_id",d[77]=d[18].get(d[89]),d[18],d[77]!==void 0?d[66].set(d[89],d[77]):0,d[90]="is_error",d[78]=d[18].get(d[90]),d[18],d[78]!==void 0?d[66].set(d[90],d[78]):0,d[65]=d[66]),d[9].set(d[50],d[65])),d[51]="pobox",d[20]=d[8].get(d[51]),d[8],d[20]?d[21]=!1:d[21]=!0,d[21]?0:(d[20]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[69]="pobox_fbid",d[67]=d[20].get(d[69]),d[20],d[67]!==void 0?(d[67]!==void 0?d[71]=c.i64.from_string(d[67]):d[71]=void 0,d[66].set(d[69],d[71])):0,d[70]="pobox_id",d[68]=d[20].get(d[70]),d[20],d[68]!==void 0?d[66].set(d[70],d[68]):0,d[65]=d[66]),d[9].set(d[51],d[65])),d[52]="video",d[22]=d[8].get(d[52]),d[8],d[22]?d[23]=!1:d[23]=!0,d[23]?0:(d[22]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[68]="unified_upload_mos",d[67]=d[22].get(d[68]),d[22],d[67]!==void 0?d[66].set(d[68],d[67]):0,d[65]=d[66]),d[9].set(d[52],d[65])),d[53]="text_translation",d[24]=d[8].get(d[53]),d[8],d[24]?d[25]=!1:d[25]=!0,d[25]?0:(d[24]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[70]="translated_text",d[67]=d[24].get(d[70]),d[24],d[67]!==void 0?d[66].set(d[70],d[67]):0,d[71]="text_dialect",d[68]=d[24].get(d[71]),d[24],d[68]!==void 0?d[66].set(d[71],d[68]):0,d[72]="translated_text_dialect",d[69]=d[24].get(d[72]),d[24],d[69]!==void 0?d[66].set(d[72],d[69]):0,d[65]=d[66]),d[9].set(d[53],d[65])),d[54]="memories",d[26]=d[8].get(d[54]),d[8],d[26]?d[27]=!1:d[27]=!0,d[27]?0:(d[26]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[70]="original_message_id",d[67]=d[26].get(d[70]),d[26],d[67]!==void 0?d[66].set(d[70],d[67]):0,d[71]="original_message_creation_ts",d[68]=d[26].get(d[71]),d[26],d[68]!==void 0?(d[68]!==void 0?d[73]=c.i64.from_string(d[68]):d[73]=void 0,d[66].set(d[71],d[73])):0,d[72]="memory_server_id",d[69]=d[26].get(d[72]),d[26],d[69]!==void 0?(d[69]!==void 0?d[73]=c.i64.from_string(d[69]):d[73]=void 0,d[66].set(d[72],d[73])):0,d[65]=d[66]),d[9].set(d[54],d[65])),d[55]="command",d[28]=d[8].get(d[55]),d[8],d[28]?d[29]=!1:d[29]=!0,d[29]?0:(d[28]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[68]="command_type",d[67]=d[28].get(d[68]),d[28],c.i64.neq(d[67],void 0)?d[66].set(d[68],d[67]):0,d[65]=d[66]),d[9].set(d[55],d[65])),d[56]="admin_message",d[30]=d[8].get(d[56]),d[8],d[30]?d[31]=!1:d[31]=!0,d[31]?0:(d[30]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[77]="ad_client_token",d[67]=d[30].get(d[77]),d[30],d[67]!==void 0?d[66].set(d[77],d[67]):0,d[78]="ad_preference_url",d[68]=d[30].get(d[78]),d[30],d[68]!==void 0?d[66].set(d[78],d[68]):0,d[79]="ad_help_url",d[69]=d[30].get(d[79]),d[30],d[69]!==void 0?d[66].set(d[79],d[69]):0,d[80]="show_ad_choice_icon",d[70]=d[30].get(d[80]),d[30],d[70]!==void 0?d[66].set(d[80],d[70]):0,d[81]="title",d[71]=d[30].get(d[81]),d[30],d[71]!==void 0?d[66].set(d[81],d[71]):0,d[82]="action_url",d[72]=d[30].get(d[82]),d[30],d[72]!==void 0?d[66].set(d[82],d[72]):0,d[83]="admin_message_nickname_participant_id",d[73]=d[30].get(d[83]),d[30],d[73]!==void 0?(d[73]!==void 0?d[87]=c.i64.from_string(d[73]):d[87]=void 0,d[66].set(d[83],d[87])):0,d[84]="target_id",d[74]=d[30].get(d[84]),d[30],d[74]!==void 0?(d[74]!==void 0?d[87]=c.i64.from_string(d[74]):d[87]=void 0,d[66].set(d[84],d[87])):0,d[85]="target_title",d[75]=d[30].get(d[85]),d[30],d[75]!==void 0?d[66].set(d[85],d[75]):0,d[86]="identifier_name",d[76]=d[30].get(d[86]),d[30],d[76]!==void 0?d[66].set(d[86],d[76]):0,d[65]=d[66]),d[9].set(d[56],d[65])),d[57]="misinfo_metadata",d[32]=d[8].get(d[57]),d[8],d[32]?d[33]=!1:d[33]=!0,d[33]?0:(d[32]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[69]="has_misinfo",d[67]=d[32].get(d[69]),d[32],d[67]!==void 0?d[66].set(d[69],d[67]):0,d[70]="misinfo_source",d[68]=d[32].get(d[70]),d[32],d[68]!==void 0?d[66].set(d[70],d[68]):0,d[65]=d[66]),d[9].set(d[57],d[65])),d[58]="forwarded_message",d[34]=d[8].get(d[58]),d[8],d[34]?d[35]=!1:d[35]=!0,d[35]?0:(d[34]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[69]="forwarded_from_thread_name",d[67]=d[34].get(d[69]),d[34],d[67]!==void 0?d[66].set(d[69],d[67]):0,d[70]="forwarded_from_thread_url",d[68]=d[34].get(d[70]),d[34],d[68]!==void 0?d[66].set(d[70],d[68]):0,d[65]=d[66]),d[9].set(d[58],d[65])),d[59]="ai_metadata",d[36]=d[8].get(d[59]),d[8],d[36]?d[37]=!1:d[37]=!0,d[37]?0:(d[36]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[68]="is_ai_generated",d[67]=d[36].get(d[68]),d[36],d[67]!==void 0?d[66].set(d[68],d[67]):0,d[65]=d[66]),d[9].set(d[59],d[65])),d[60]="encrypted_message",d[38]=d[8].get(d[60]),d[8],d[38]?d[39]=!1:d[39]=!0,d[39]?c.resolve():c.sequence([function(a){return d[38]?d[64]=!1:d[64]=!0,d[64]?c.resolve(d[65]=void 0):c.sequence([function(a){return d[66]=new c.Map(),d[74]="thread_id",d[67]=d[38].get(d[74]),d[38],d[67]!==void 0?d[66].set(d[74],d[67]):0,d[75]="offline_threading_id",d[68]=d[38].get(d[75]),d[38],d[68]!==void 0?d[66].set(d[75],d[68]):0,d[76]="toplevel_payload",d[69]=d[38].get(d[76]),d[38],d[69]?d[70]=!1:d[70]=!0,d[70]?0:(d[79]=new c.Map(),d[85]="encrypted_payload",d[80]=d[69].get(d[85]),d[69],d[80]!==void 0?d[79].set(d[85],d[80]):0,d[86]="payloadTimestampMs",d[81]=d[69].get(d[86]),d[69],d[81]!==void 0?d[79].set(d[86],c.i64.from_string(d[81])):0,d[87]="encryption_version",d[82]=d[69].get(d[87]),d[69],c.i64.neq(d[82],void 0)?d[79].set(d[87],d[82]):0,d[88]="epoch_id",d[83]=d[69].get(d[88]),d[69],d[83]!==void 0?d[79].set(d[88],c.i64.from_string(d[83])):0,d[89]="epoch_anon_id",d[84]=d[69].get(d[89]),d[69],d[84]!==void 0?d[79].set(d[89],d[84]):0,d[66].set(d[76],d[79])),d[77]="supplemental_payloads",d[71]=d[38].get(d[77]),d[38],d[71]?d[72]=!1:d[72]=!0,d[72]?c.resolve():c.sequence([function(a){return d[79]=c.createArray(),d[80]=c.i64.of_int32(d[71].length),c.i64.gt(d[80],c.i64.cast([0,0]))?c.loopAsync(d[80],function(a){return d[81]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[71],d[81]).then(function(a){return a=a,d[82]=a[0],d[83]=a[1],a})},function(a){return d[84]=new c.Map(),d[89]="encrypted_supplemental_key",d[85]=d[82].get(d[89]),d[82],d[85]!==void 0?d[84].set(d[89],d[85]):0,d[90]="supplemental_key_ciphertext",d[86]=d[82].get(d[90]),d[82],d[86]!==void 0?d[84].set(d[90],d[86]):0,d[91]="encrypted_supplemental_payload",d[87]=d[82].get(d[91]),d[82],d[87]?d[88]=!1:d[88]=!0,d[88]?0:(d[92]=new c.Map(),d[98]="encrypted_payload",d[93]=d[87].get(d[98]),d[87],d[93]!==void 0?d[92].set(d[98],d[93]):0,d[99]="payloadTimestampMs",d[94]=d[87].get(d[99]),d[87],d[94]!==void 0?d[92].set(d[99],c.i64.from_string(d[94])):0,d[100]="encryption_version",d[95]=d[87].get(d[100]),d[87],c.i64.neq(d[95],void 0)?d[92].set(d[100],d[95]):0,d[101]="epoch_id",d[96]=d[87].get(d[101]),d[87],d[96]!==void 0?d[92].set(d[101],c.i64.from_string(d[96])):0,d[102]="epoch_anon_id",d[97]=d[87].get(d[102]),d[87],d[97]!==void 0?d[92].set(d[102],d[97]):0,d[84].set(d[91],d[92])),d[92]=(d[79].push(d[84]),d[79])}])}):c.resolve()},function(a){return d[66].set(d[77],d[79])}])},function(a){return d[78]="is_open_eb",d[73]=d[38].get(d[78]),d[38],d[73]!==void 0?d[66].set(d[78],d[73]):0,d[65]=d[66]}])},function(a){return d[9].set(d[60],d[65])}])},function(a){return d[61]="rich_text",d[40]=d[8].get(d[61]),d[8],d[40]?d[41]=!1:d[41]=!0,d[41]?0:(d[40]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[68]="rich_text_format_type",d[67]=d[40].get(d[68]),d[40],c.i64.neq(d[67],void 0)?d[66].set(d[68],d[67]):0,d[65]=d[66]),d[9].set(d[61],d[65])),d[62]="content_logging_metadata",d[42]=d[8].get(d[62]),d[8],d[42]?d[43]=!1:d[43]=!0,d[43]?c.resolve():c.sequence([function(a){return d[42]?d[64]=!1:d[64]=!0,d[64]?c.resolve(d[65]=void 0):c.sequence([function(a){return d[66]=new c.Map(),d[71]="containing_post",d[67]=d[42].get(d[71]),d[42],d[67]?d[68]=!1:d[68]=!0,d[68]?c.resolve():c.sequence([function(a){return d[67]?d[73]=!1:d[73]=!0,d[73]?c.resolve(d[74]=void 0):c.sequence([function(a){return d[75]=new c.Map(),d[83]="key_type",d[76]=d[67].get(d[83]),d[67],d[76]!==void 0?d[75].set(d[83],d[76]):0,d[84]="fb_post_type",d[77]=d[67].get(d[84]),d[67],d[77]?d[78]=!1:d[78]=!0,d[78]?c.resolve():c.sequence([function(a){return d[77]?d[87]=!1:d[87]=!0,d[87]?c.resolve(d[88]=void 0):c.sequence([function(a){return d[89]=c.createArray(),d[90]=c.i64.of_int32(d[77].length),c.i64.gt(d[90],c.i64.cast([0,0]))?c.loopAsync(d[90],function(a){return d[91]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[77],d[91]).then(function(a){return a=a,d[92]=a[0],d[93]=a[1],a})},function(a){return d[94]=(d[89].push(d[92]),d[89])}])}):c.resolve()},function(a){return d[88]=d[89]}])},function(a){return d[75].set(d[84],d[88])}])},function(a){return d[85]="photos",d[79]=d[67].get(d[85]),d[67],d[79]?d[80]=!1:d[80]=!0,d[80]?c.resolve():c.sequence([function(a){return d[79]?d[87]=!1:d[87]=!0,d[87]?c.resolve(d[88]=void 0):c.sequence([function(a){return d[89]=c.createArray(),d[90]=c.i64.of_int32(d[79].length),c.i64.gt(d[90],c.i64.cast([0,0]))?c.loopAsync(d[90],function(a){return d[91]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[79],d[91]).then(function(a){return a=a,d[92]=a[0],d[93]=a[1],a})},function(a){return d[94]=new c.Map(),d[96]="key_type",d[95]=d[92].get(d[96]),d[92],d[95]!==void 0?d[94].set(d[96],d[95]):0,d[97]=(d[89].push(d[94]),d[89])}])}):c.resolve()},function(a){return d[88]=d[89]}])},function(a){return d[75].set(d[85],d[88])}])},function(a){return d[86]="videos",d[81]=d[67].get(d[86]),d[67],d[81]?d[82]=!1:d[82]=!0,d[82]?c.resolve():c.sequence([function(a){return d[81]?d[87]=!1:d[87]=!0,d[87]?c.resolve(d[88]=void 0):c.sequence([function(a){return d[89]=c.createArray(),d[90]=c.i64.of_int32(d[81].length),c.i64.gt(d[90],c.i64.cast([0,0]))?c.loopAsync(d[90],function(a){return d[91]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[81],d[91]).then(function(a){return a=a,d[92]=a[0],d[93]=a[1],a})},function(a){return d[94]=new c.Map(),d[96]="key_type",d[95]=d[92].get(d[96]),d[92],d[95]!==void 0?d[94].set(d[96],d[95]):0,d[97]=(d[89].push(d[94]),d[89])}])}):c.resolve()},function(a){return d[88]=d[89]}])},function(a){return d[75].set(d[86],d[88])}])},function(a){return d[74]=d[75]}])},function(a){return d[66].set(d[71],d[74])}])},function(a){return d[72]="metadata",d[69]=d[42].get(d[72]),d[42],d[69]?d[70]=!1:d[70]=!0,d[70]?c.resolve():c.sequence([function(a){return d[69]?d[73]=!1:d[73]=!0,d[73]?c.resolve(d[74]=void 0):c.sequence([function(a){return d[75]=d[69].get("__typename"),d[69],d[75]==="XMSGGroupsContentLoggingMetadata"?c.resolve((d[77]=new c.Map(),d[79]="num_members",d[78]=d[69].get(d[79]),d[69],c.i64.neq(d[78],void 0)?d[77].set(d[79],d[78]):0,d[76]=d[77])):c.sequence([function(a){return function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGContentLoggingMetadataUnion: ","",d[75]].join("")),d[77]=new c.Map(),d[78]=d[69].keys(),d[79]=c.i64.of_int32(d[78].length),c.i64.gt(d[79],c.i64.cast([0,0]))?c.loopAsync(d[79],function(a){return d[80]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[78],d[80]).then(function(a){return a=a,d[81]=a[0],d[82]=a[1],a})},function(a){return d[83]=d[69].get(d[81]),d[69],d[77].set(d[81],d[83])}])}):c.resolve()},function(a){return d[76]=d[77]}])},function(a){return d[76].set("__typename",d[75]),d[74]=d[76]}])},function(a){return d[66].set(d[72],d[74])}])},function(a){return d[65]=d[66]}])},function(a){return d[9].set(d[62],d[65])}])},function(a){return d[63]="suggested_moderation_actions",d[44]=d[8].get(d[63]),d[8],d[44]?d[45]=!1:d[45]=!0,d[45]?0:(d[44]?d[64]=!1:d[64]=!0,d[64]?d[65]=void 0:(d[66]=new c.Map(),d[68]="suggested_moderation_actions_json",d[67]=d[44].get(d[68]),d[44],d[67]!==void 0?d[66].set(d[68],d[67]):0,d[65]=d[66]),d[9].set(d[63],d[65])),d[6]=d[9]}]):c.resolve((d[8]=new c.Map(),d[6]=d[8]))},function(a){return d[1]=d[6]}]))})},function(e){return d[1]?d[3]=!1:d[3]=!0,d[3]?0:(d[6]=new c.Map(),d[6].set("ad_client_token",a[5]),d[6].set("ad_preference_url",a[6]),d[6].set("ad_help_url",a[7]),d[6].set("show_ad_choice_icon",a[8]),d[6].set("title",a[3]),d[6].set("action_url",a[9]),d[6].set("admin_message_nickname_participant_id",a[10]),d[6].set("target_id",a[11]),d[6].set("target_title",a[12]),d[6].set("identifier_name",void 0),d[1].set("admin_message",d[6])),d[1]?d[4]=!1:d[4]=!0,d[4]?c.resolve(d[5]=void 0):c.sequence([function(a){return d[6]=new c.Map(),d[44]="sticker",d[7]=d[1].get(d[44]),d[1],d[7]?d[8]=!1:d[8]=!0,d[8]?0:(d[7]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[67]="sticker_pack_id",d[65]=d[7].get(d[67]),d[7],d[65]!==void 0?d[64].set(d[67],d[65]):0,d[68]="sticker_id",d[66]=d[7].get(d[68]),d[7],d[66]!==void 0?d[64].set(d[68],d[66]):0,d[63]=d[64]),d[6].set(d[44],d[63])),d[45]="word_effects",d[9]=d[1].get(d[45]),d[1],d[9]?d[10]=!1:d[10]=!0,d[10]?0:(d[9]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[71]="magic_word_offsets",d[65]=d[9].get(d[71]),d[9],d[65]?d[66]=!1:d[66]=!0,d[66]?0:d[64].set(d[71],d[65]),d[72]="magic_word_lengths",d[67]=d[9].get(d[72]),d[9],d[67]?d[68]=!1:d[68]=!0,d[68]?0:d[64].set(d[72],d[67]),d[73]="magic_word_emojis",d[69]=d[9].get(d[73]),d[9],d[69]?d[70]=!1:d[70]=!0,d[70]?0:d[64].set(d[73],d[69]),d[63]=d[64]),d[6].set(d[45],d[63])),d[46]="ig_avatar_sticker",d[11]=d[1].get(d[46]),d[1],d[11]?d[12]=!1:d[12]=!0,d[12]?0:(d[11]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[66]="is_avatar_sticker",d[65]=d[11].get(d[66]),d[11],d[65]!==void 0?d[64].set(d[66],d[65]):0,d[63]=d[64]),d[6].set(d[46],d[63])),d[47]="power_up",d[13]=d[1].get(d[47]),d[1],d[13]?d[14]=!1:d[14]=!0,d[14]?0:(d[13]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[66]="power_up_style",d[65]=d[13].get(d[66]),d[13],d[65]!==void 0?d[64].set(d[66],d[65]):0,d[63]=d[64]),d[6].set(d[47],d[63])),d[48]="ai_bot",d[15]=d[1].get(d[48]),d[1],d[15]?d[16]=!1:d[16]=!0,d[16]?0:(d[15]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[77]="response_id",d[65]=d[15].get(d[77]),d[15],d[65]!==void 0?d[64].set(d[77],d[65]):0,d[78]="bot_action",d[66]=d[15].get(d[78]),d[15],d[66]!==void 0?d[64].set(d[78],d[66]):0,d[79]="sentiment",d[67]=d[15].get(d[79]),d[15],d[67]!==void 0?d[64].set(d[79],d[67]):0,d[80]="sentiment_intensity",d[68]=d[15].get(d[80]),d[15],d[68]!==void 0?d[64].set(d[80],d[68]):0,d[81]="bot_action_int",d[69]=d[15].get(d[81]),d[15],c.i64.neq(d[69],void 0)?d[64].set(d[81],d[69]):0,d[82]="sentiment_int",d[70]=d[15].get(d[82]),d[15],c.i64.neq(d[70],void 0)?d[64].set(d[82],d[70]):0,d[83]="sentiment_intensity_int",d[71]=d[15].get(d[83]),d[15],c.i64.neq(d[71],void 0)?d[64].set(d[83],d[71]):0,d[84]="bot_invocation_message_id",d[72]=d[15].get(d[84]),d[15],d[72]!==void 0?d[64].set(d[84],d[72]):0,d[85]="bot_response_id",d[73]=d[15].get(d[85]),d[15],d[73]!==void 0?d[64].set(d[85],d[73]):0,d[86]="bot_invocation_message_otid",d[74]=d[15].get(d[86]),d[15],d[74]!==void 0?d[64].set(d[86],d[74]):0,d[87]="bot_invocation_logging_id",d[75]=d[15].get(d[87]),d[15],d[75]!==void 0?d[64].set(d[87],d[75]):0,d[88]="is_error",d[76]=d[15].get(d[88]),d[15],d[76]!==void 0?d[64].set(d[88],d[76]):0,d[63]=d[64]),d[6].set(d[48],d[63])),d[49]="pobox",d[17]=d[1].get(d[49]),d[1],d[17]?d[18]=!1:d[18]=!0,d[18]?0:(d[17]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[67]="pobox_fbid",d[65]=d[17].get(d[67]),d[17],c.i64.neq(d[65],void 0)?(c.i64.neq(d[65],void 0)?d[69]=c.i64.to_string(d[65]):d[69]=void 0,d[64].set(d[67],d[69])):0,d[68]="pobox_id",d[66]=d[17].get(d[68]),d[17],d[66]!==void 0?d[64].set(d[68],d[66]):0,d[63]=d[64]),d[6].set(d[49],d[63])),d[50]="video",d[19]=d[1].get(d[50]),d[1],d[19]?d[20]=!1:d[20]=!0,d[20]?0:(d[19]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[66]="unified_upload_mos",d[65]=d[19].get(d[66]),d[19],d[65]!==void 0?d[64].set(d[66],d[65]):0,d[63]=d[64]),d[6].set(d[50],d[63])),d[51]="text_translation",d[21]=d[1].get(d[51]),d[1],d[21]?d[22]=!1:d[22]=!0,d[22]?0:(d[21]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[68]="translated_text",d[65]=d[21].get(d[68]),d[21],d[65]!==void 0?d[64].set(d[68],d[65]):0,d[69]="text_dialect",d[66]=d[21].get(d[69]),d[21],d[66]!==void 0?d[64].set(d[69],d[66]):0,d[70]="translated_text_dialect",d[67]=d[21].get(d[70]),d[21],d[67]!==void 0?d[64].set(d[70],d[67]):0,d[63]=d[64]),d[6].set(d[51],d[63])),d[52]="memories",d[23]=d[1].get(d[52]),d[1],d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[68]="original_message_id",d[65]=d[23].get(d[68]),d[23],d[65]!==void 0?d[64].set(d[68],d[65]):0,d[69]="original_message_creation_ts",d[66]=d[23].get(d[69]),d[23],c.i64.neq(d[66],void 0)?(c.i64.neq(d[66],void 0)?d[71]=c.i64.to_string(d[66]):d[71]=void 0,d[64].set(d[69],d[71])):0,d[70]="memory_server_id",d[67]=d[23].get(d[70]),d[23],c.i64.neq(d[67],void 0)?(c.i64.neq(d[67],void 0)?d[71]=c.i64.to_string(d[67]):d[71]=void 0,d[64].set(d[70],d[71])):0,d[63]=d[64]),d[6].set(d[52],d[63])),d[53]="command",d[25]=d[1].get(d[53]),d[1],d[25]?d[26]=!1:d[26]=!0,d[26]?0:(d[25]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[66]="command_type",d[65]=d[25].get(d[66]),d[25],c.i64.neq(d[65],void 0)?d[64].set(d[66],d[65]):0,d[63]=d[64]),d[6].set(d[53],d[63])),d[54]="admin_message",d[27]=d[1].get(d[54]),d[1],d[27]?d[28]=!1:d[28]=!0,d[28]?0:(d[27]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[75]="ad_client_token",d[65]=d[27].get(d[75]),d[27],d[65]!==void 0?d[64].set(d[75],d[65]):0,d[76]="ad_preference_url",d[66]=d[27].get(d[76]),d[27],d[66]!==void 0?d[64].set(d[76],d[66]):0,d[77]="ad_help_url",d[67]=d[27].get(d[77]),d[27],d[67]!==void 0?d[64].set(d[77],d[67]):0,d[78]="show_ad_choice_icon",d[68]=d[27].get(d[78]),d[27],d[68]!==void 0?d[64].set(d[78],d[68]):0,d[79]="title",d[69]=d[27].get(d[79]),d[27],d[69]!==void 0?d[64].set(d[79],d[69]):0,d[80]="action_url",d[70]=d[27].get(d[80]),d[27],d[70]!==void 0?d[64].set(d[80],d[70]):0,d[81]="admin_message_nickname_participant_id",d[71]=d[27].get(d[81]),d[27],c.i64.neq(d[71],void 0)?(c.i64.neq(d[71],void 0)?d[85]=c.i64.to_string(d[71]):d[85]=void 0,d[64].set(d[81],d[85])):0,d[82]="target_id",d[72]=d[27].get(d[82]),d[27],c.i64.neq(d[72],void 0)?(c.i64.neq(d[72],void 0)?d[85]=c.i64.to_string(d[72]):d[85]=void 0,d[64].set(d[82],d[85])):0,d[83]="target_title",d[73]=d[27].get(d[83]),d[27],d[73]!==void 0?d[64].set(d[83],d[73]):0,d[84]="identifier_name",d[74]=d[27].get(d[84]),d[27],d[74]!==void 0?d[64].set(d[84],d[74]):0,d[63]=d[64]),d[6].set(d[54],d[63])),d[55]="misinfo_metadata",d[29]=d[1].get(d[55]),d[1],d[29]?d[30]=!1:d[30]=!0,d[30]?0:(d[29]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[67]="has_misinfo",d[65]=d[29].get(d[67]),d[29],d[65]!==void 0?d[64].set(d[67],d[65]):0,d[68]="misinfo_source",d[66]=d[29].get(d[68]),d[29],d[66]!==void 0?d[64].set(d[68],d[66]):0,d[63]=d[64]),d[6].set(d[55],d[63])),d[56]="forwarded_message",d[31]=d[1].get(d[56]),d[1],d[31]?d[32]=!1:d[32]=!0,d[32]?0:(d[31]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[67]="forwarded_from_thread_name",d[65]=d[31].get(d[67]),d[31],d[65]!==void 0?d[64].set(d[67],d[65]):0,d[68]="forwarded_from_thread_url",d[66]=d[31].get(d[68]),d[31],d[66]!==void 0?d[64].set(d[68],d[66]):0,d[63]=d[64]),d[6].set(d[56],d[63])),d[57]="ai_metadata",d[33]=d[1].get(d[57]),d[1],d[33]?d[34]=!1:d[34]=!0,d[34]?0:(d[33]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[66]="is_ai_generated",d[65]=d[33].get(d[66]),d[33],d[65]!==void 0?d[64].set(d[66],d[65]):0,d[63]=d[64]),d[6].set(d[57],d[63])),d[58]="encrypted_message",d[35]=d[1].get(d[58]),d[1],d[35]?d[36]=!1:d[36]=!0,d[36]?c.resolve():c.sequence([function(a){return d[35]?d[62]=!1:d[62]=!0,d[62]?c.resolve(d[63]=void 0):c.sequence([function(a){return d[64]=new c.Map(),d[72]="thread_id",d[65]=d[35].get(d[72]),d[35],d[65]!==void 0?d[64].set(d[72],d[65]):0,d[73]="offline_threading_id",d[66]=d[35].get(d[73]),d[35],d[66]!==void 0?d[64].set(d[73],d[66]):0,d[74]="toplevel_payload",d[67]=d[35].get(d[74]),d[35],d[67]?d[68]=!1:d[68]=!0,d[68]?0:(d[77]=new c.Map(),d[83]="encrypted_payload",d[78]=d[67].get(d[83]),d[67],d[78]!==void 0?d[77].set(d[83],d[78]):0,d[84]="payloadTimestampMs",d[79]=d[67].get(d[84]),d[67],c.i64.neq(d[79],void 0)?d[77].set(d[84],c.i64.to_string(d[79])):0,d[85]="encryption_version",d[80]=d[67].get(d[85]),d[67],c.i64.neq(d[80],void 0)?d[77].set(d[85],d[80]):0,d[86]="epoch_id",d[81]=d[67].get(d[86]),d[67],c.i64.neq(d[81],void 0)?d[77].set(d[86],c.i64.to_string(d[81])):0,d[87]="epoch_anon_id",d[82]=d[67].get(d[87]),d[67],d[82]!==void 0?d[77].set(d[87],d[82]):0,d[64].set(d[74],d[77])),d[75]="supplemental_payloads",d[69]=d[35].get(d[75]),d[35],d[69]?d[70]=!1:d[70]=!0,d[70]?c.resolve():c.sequence([function(a){return d[77]=c.createArray(),d[78]=c.i64.of_int32(d[69].length),c.i64.gt(d[78],c.i64.cast([0,0]))?c.loopAsync(d[78],function(a){return d[79]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[69],d[79]).then(function(a){return a=a,d[80]=a[0],d[81]=a[1],a})},function(a){return d[82]=new c.Map(),d[87]="encrypted_supplemental_key",d[83]=d[80].get(d[87]),d[80],d[83]!==void 0?d[82].set(d[87],d[83]):0,d[88]="supplemental_key_ciphertext",d[84]=d[80].get(d[88]),d[80],d[84]!==void 0?d[82].set(d[88],d[84]):0,d[89]="encrypted_supplemental_payload",d[85]=d[80].get(d[89]),d[80],d[85]?d[86]=!1:d[86]=!0,d[86]?0:(d[90]=new c.Map(),d[96]="encrypted_payload",d[91]=d[85].get(d[96]),d[85],d[91]!==void 0?d[90].set(d[96],d[91]):0,d[97]="payloadTimestampMs",d[92]=d[85].get(d[97]),d[85],c.i64.neq(d[92],void 0)?d[90].set(d[97],c.i64.to_string(d[92])):0,d[98]="encryption_version",d[93]=d[85].get(d[98]),d[85],c.i64.neq(d[93],void 0)?d[90].set(d[98],d[93]):0,d[99]="epoch_id",d[94]=d[85].get(d[99]),d[85],c.i64.neq(d[94],void 0)?d[90].set(d[99],c.i64.to_string(d[94])):0,d[100]="epoch_anon_id",d[95]=d[85].get(d[100]),d[85],d[95]!==void 0?d[90].set(d[100],d[95]):0,d[82].set(d[89],d[90])),d[90]=(d[77].push(d[82]),d[77])}])}):c.resolve()},function(a){return d[64].set(d[75],d[77])}])},function(a){return d[76]="is_open_eb",d[71]=d[35].get(d[76]),d[35],d[71]!==void 0?d[64].set(d[76],d[71]):0,d[63]=d[64]}])},function(a){return d[6].set(d[58],d[63])}])},function(a){return d[59]="rich_text",d[37]=d[1].get(d[59]),d[1],d[37]?d[38]=!1:d[38]=!0,d[38]?0:(d[37]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[66]="rich_text_format_type",d[65]=d[37].get(d[66]),d[37],c.i64.neq(d[65],void 0)?d[64].set(d[66],d[65]):0,d[63]=d[64]),d[6].set(d[59],d[63])),d[60]="content_logging_metadata",d[39]=d[1].get(d[60]),d[1],d[39]?d[40]=!1:d[40]=!0,d[40]?c.resolve():c.sequence([function(a){return d[39]?d[62]=!1:d[62]=!0,d[62]?c.resolve(d[63]=void 0):c.sequence([function(a){return d[64]=new c.Map(),d[69]="containing_post",d[65]=d[39].get(d[69]),d[39],d[65]?d[66]=!1:d[66]=!0,d[66]?c.resolve():c.sequence([function(a){return d[65]?d[71]=!1:d[71]=!0,d[71]?c.resolve(d[72]=void 0):c.sequence([function(a){return d[73]=new c.Map(),d[81]="key_type",d[74]=d[65].get(d[81]),d[65],d[74]!==void 0?d[73].set(d[81],d[74]):0,d[82]="fb_post_type",d[75]=d[65].get(d[82]),d[65],d[75]?d[76]=!1:d[76]=!0,d[76]?0:d[73].set(d[82],d[75]),d[83]="photos",d[77]=d[65].get(d[83]),d[65],d[77]?d[78]=!1:d[78]=!0,d[78]?c.resolve():c.sequence([function(a){return d[77]?d[85]=!1:d[85]=!0,d[85]?c.resolve(d[86]=void 0):c.sequence([function(a){return d[87]=c.createArray(),d[88]=c.i64.of_int32(d[77].length),c.i64.gt(d[88],c.i64.cast([0,0]))?c.loopAsync(d[88],function(a){return d[89]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[77],d[89]).then(function(a){return a=a,d[90]=a[0],d[91]=a[1],a})},function(a){return d[92]=new c.Map(),d[94]="key_type",d[93]=d[90].get(d[94]),d[90],d[93]!==void 0?d[92].set(d[94],d[93]):0,d[95]=(d[87].push(d[92]),d[87])}])}):c.resolve()},function(a){return d[86]=d[87]}])},function(a){return d[73].set(d[83],d[86])}])},function(a){return d[84]="videos",d[79]=d[65].get(d[84]),d[65],d[79]?d[80]=!1:d[80]=!0,d[80]?c.resolve():c.sequence([function(a){return d[79]?d[85]=!1:d[85]=!0,d[85]?c.resolve(d[86]=void 0):c.sequence([function(a){return d[87]=c.createArray(),d[88]=c.i64.of_int32(d[79].length),c.i64.gt(d[88],c.i64.cast([0,0]))?c.loopAsync(d[88],function(a){return d[89]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[79],d[89]).then(function(a){return a=a,d[90]=a[0],d[91]=a[1],a})},function(a){return d[92]=new c.Map(),d[94]="key_type",d[93]=d[90].get(d[94]),d[90],d[93]!==void 0?d[92].set(d[94],d[93]):0,d[95]=(d[87].push(d[92]),d[87])}])}):c.resolve()},function(a){return d[86]=d[87]}])},function(a){return d[73].set(d[84],d[86])}])},function(a){return d[72]=d[73]}])},function(a){return d[64].set(d[69],d[72])}])},function(a){return d[70]="metadata",d[67]=d[39].get(d[70]),d[39],d[67]?d[68]=!1:d[68]=!0,d[68]?0:(d[67]?d[71]=!1:d[71]=!0,d[71]?d[72]=void 0:(d[73]=d[67].get("__typename"),d[67],d[73]==="XMSGGroupsContentLoggingMetadata"?(d[75]=new c.Map(),d[77]="num_members",d[76]=d[67].get(d[77]),d[67],c.i64.neq(d[76],void 0)?d[75].set(d[77],d[76]):0,d[74]=d[75]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGContentLoggingMetadataUnion: ","",d[73]].join("")),d[74]=d[67]),d[74].set("__typename",d[73]),d[72]=d[74]),d[64].set(d[70],d[72])),d[63]=d[64]}])},function(a){return d[6].set(d[60],d[63])}])},function(a){return d[61]="suggested_moderation_actions",d[41]=d[1].get(d[61]),d[1],d[41]?d[42]=!1:d[42]=!0,d[42]?0:(d[41]?d[62]=!1:d[62]=!0,d[62]?d[63]=void 0:(d[64]=new c.Map(),d[66]="suggested_moderation_actions_json",d[65]=d[41].get(d[66]),d[41],d[65]!==void 0?d[64].set(d[66],d[65]):0,d[63]=d[64]),d[6].set(d[61],d[63])),d[43]=c.toJSON(d[6]),d[5]=d[43]}])},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0],a[1],a[2]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.timestampMs,a[1])&&b.messageId===a[2]}),function(b){var c=b.update;b.item;return c({adminMsgCtaId:d[0],adminMsgCtaTitle:a[3],adminMsgCtaType:a[4],metadataDataclass:d[5]})})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);