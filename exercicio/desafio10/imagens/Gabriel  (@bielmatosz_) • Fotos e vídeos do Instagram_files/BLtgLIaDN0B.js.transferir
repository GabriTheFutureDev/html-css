;/*FB_PKG_DELIM*/

__d("PolarisPostCommentInputRevampedMutation_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7401025399932973"}),null);
__d("PolarisPostCommentInputRevampedMutation.graphql",["PolarisPostCommentInputRevampedMutation_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"connections"},c={defaultValue:null,kind:"LocalArgument",name:"media_id"},d={defaultValue:null,kind:"LocalArgument",name:"request_data"},e=[{kind:"Variable",name:"media_id",variableName:"media_id"},{kind:"Variable",name:"request_data",variableName:"request_data"}],f={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"profile_pic_url",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"is_verified",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"fbid_v2",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"PolarisPostCommentInputRevampedMutation",selections:[{alias:null,args:e,concreteType:"XDTAddCommentWebResponse",kind:"LinkedField",name:"xdt_web__comments__media_id__add_queryable",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:f,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.created_at"},{kind:"RequiredField",field:g,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.pk"},{kind:"RequiredField",field:h,action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.text"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[g,i,j,k,l,m],storageKey:null},action:"THROW",path:"xdt_web__comments__media_id__add_queryable.node.user"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,d,c],kind:"Operation",name:"PolarisPostCommentInputRevampedMutation",selections:[{alias:null,args:e,concreteType:"XDTAddCommentWebResponse",kind:"LinkedField",name:"xdt_web__comments__media_id__add_queryable",plural:!1,selections:[{alias:null,args:null,concreteType:"XDTCommentDict",kind:"LinkedField",name:"node",plural:!1,selections:[f,g,h,{alias:null,args:null,concreteType:"XDTUserDict",kind:"LinkedField",name:"user",plural:!1,selections:[g,i,j,k,l,m,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,filters:null,handle:"prependNode",key:"",kind:"LinkedHandle",name:"node",handleArgs:[{kind:"Variable",name:"connections",variableName:"connections"},{kind:"Literal",name:"edgeTypeName",value:"XDTGetCommentsResponseEdge"}]}],storageKey:null}]},params:{id:b("PolarisPostCommentInputRevampedMutation_instagramRelayOperation"),metadata:{is_distillery:!0},name:"PolarisPostCommentInputRevampedMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PolarisPostCommentInputRevamped.react",["CometRelay","PolarisCommentsSortContext.react","PolarisDsaQEHelpers","PolarisPendingCommentState","PolarisPostCommentInput.react","PolarisPostCommentInputRevampedMutation.graphql","PolarisSortCommentsUtil","Promise","QPLUserFlow","polarisGetXDTCommentDict","qpl","react","usePolarisAnalyticsContext","usePolarisCommentInputRevamped","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useContext,m=e.unstable_useMemoCache,n=h!==void 0?h:h=b("PolarisPostCommentInputRevampedMutation.graphql");f=k.forwardRef(a);function a(a,e){var f=m(15),g=a.adInfo,h=a.isLoggedIn,j=a.isRevampedMobileInput,o=a.isSidecar,p=a.isVideo,q=a.ownerID,r=a.postID,s=a.postOwnerUsername,t=a.replyingToBarWithinInput;a=a.viewerProfilePicture;j=j===void 0?!1:j;t=t===void 0?!1:t;var u=c("usePolarisAnalyticsContext")(),v;f[0]!==r?(v=function(a){return(a=a.pendingComments[r])!=null?a:d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT},f[0]=r,f[1]=v):v=f[1];var w=c("usePolarisSelector")(v);v=d("CometRelay").useMutation(n);var x=v[0];v=l(d("PolarisCommentsSortContext.react").PolarisCommentsSortContext);var y=v.commentsSortOrder;v=c("usePolarisCommentInputRevamped")(r,o,p);var z=v.onCommit,A=v.onComplete,B=v.onError;o=function a(e,f,g,h){z();var j=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__connection",{data:{},media_id:r,sort_order:y});g=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__parent_comment_id__child_comments__connection",{media_id:r,parent_comment_id:(g=g)!=null?g:f});x({onCompleted:function(a){A(a.xdt_web__comments__media_id__add_queryable.node.text,a.xdt_web__comments__media_id__add_queryable.node.pk,q,h,w.repliedToCommentAuthorId,w.repliedToCommentParentId),c("QPLUserFlow").endSuccess(c("qpl")._(379194585,"1014"))},onError:function(){B(a,e,h,w.repliedToCommentAuthorId,w.repliedToCommentParentId),c("QPLUserFlow").endFailure(c("qpl")._(379194585,"1014"),"mutation_errored")},updater:function(a){if(d("PolarisDsaQEHelpers").hasCommentsSortEnabled(!0))for(var b=d("PolarisSortCommentsUtil").commentsOptions,e=Array.isArray(b),g=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(e){if(g>=b.length)break;h=b[g++]}else{g=b.next();if(g.done)break;h=g.value}h=h;if(h!==y){h=d("CometRelay").ConnectionHandler.getConnectionID("client:root","PolarisPostComments__xdt_api__v1__media__media_id__comments__connection",{data:{},media_id:r,sort_order:h});(h=a.get(h))==null?void 0:h.invalidateRecord()}}if(f==null)return;h=c("polarisGetXDTCommentDict")(a,f);e=(g=h==null?void 0:h.getValue("child_comment_count"))!=null?g:0;h==null?void 0:h.setValue(Number(e)+1,"child_comment_count")},variables:{connections:[f==null?j:g],media_id:r,request_data:{comment_text:e,replied_to_comment_id:f}}});return(i||(i=b("Promise"))).resolve()};v=o;a=(o=a)!=null?o:"";f[2]!==g||f[3]!==u||f[4]!==r||f[5]!==h||f[6]!==j||f[7]!==p||f[8]!==v||f[9]!==q||f[10]!==s||f[11]!==e||f[12]!==t||f[13]!==a?(o=k.jsx(c("PolarisPostCommentInput.react"),{adInfo:g,analyticsContext:u,canViewerProvideFeedback:!0,forceTextareaAutosize:!1,hasPostButton:!0,hasRichCommentInput:!0,id:r,inModal:!1,isLoggedIn:h,isRevampedMobileInput:j,isRevampVersion:!0,isVideo:p,onCommentSubmitOverride:v,ownerId:q,postOwnerUsername:s,ref:e,replyingToBarWithinInput:t,viewerProfilePicture:a}),f[2]=g,f[3]=u,f[4]=r,f[5]=h,f[6]=j,f[7]=p,f[8]=v,f[9]=q,f[10]=s,f[11]=e,f[12]=t,f[13]=a,f[14]=o):o=f[14];return o}e=f;g["default"]=e}),98);